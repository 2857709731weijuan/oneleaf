<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/page3.css">
</head>
<body>
    <div class="headerbox">
        <!-- header -->
        <header>
            <div class="hleft">
                <a href="#"> <img src="img/icon_wb.png" alt="" class="wb"></a>
                <a href="#"> <img src="img/icon_wx.png" alt="" class="wx">
                    <img src="img/wx2img.jpg" alt="" class="wximg">
                </a>
            </div>
            <div class="hmiddle">
                <a href="index.html"><img src="img/logo.png" alt=""></a>
            </div>
        </header>
    <!-- box -->
    <div class="box">
        <div class="topbox">
           <h3>登录</h3>
            <hr>
        </div>
        <div class="middlebox">
            <span>我的BOLOG</span><br>
            <span>输入您的手机号或者电子邮箱及密码登录“我的帐户”</span>
            <input type="text" placeholder="手机号/电子邮箱" class="phone" id="username"><br>
            <input type="password" placeholder="密码" id="userpass"><br>
            <input type="checkbox" class="mm" name="saveNP"><label> 记住我的密码</label><br>
            <input type="button" value="登录" class="bolog" id="btnLogin"><a href="#">忘记密码</a><br> 
            还没有账号？<a href="page4.html"> 立即注册</a>
            <div id="messageBox">
            </div>
        </div>
    </div>
    <!-- footer -->
    <footer>
        上海上美化妆品有限公司 <a href="#">沪ICP备12043696号-5</a> <br>
        中国·上海市中山北路3300号环球港B座22层 TEL：021-52035555
    </footer>
</body>
</html>
<script src="js/base.js"></script>
<script src="js/cookieTools.js"></script>
<script>

// function getCookie(key){
// 		var cookiestr = document.cookie;
// 		var list = cookiestr.split(";");
// 		for(var i in list){
// 			var arr = list[i].split("=");
// 			if(trim(arr[0]) == key){
// 				return arr[1];
// 			}
// 		}
// 		return null;
// 	}
// 	function trim(str){
// 		return str.replace(/\s+/g,"");
// 	}
	
    $("#btnLogin").onclick = function(){
        //1、
        let xhr = new XMLHttpRequest();
    
        xhr.open("post","loginCheck.php",true);
    
        xhr.onreadystatechange = function(){
            if(xhr.readyState==4 && xhr.status==200){
                if(xhr.responseText=="1"){
                    addCookie("username",$("#username").value,7);
                    location.href="index.html";
                   
                }else{
                    $("#messageBox").innerHTML = "用户名或者密码错误！";
                }
            }
        }
        //post方式：设置请求头
        xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        //post方式：把传给服务器端数据（键值对）放在send函数的参数里。
        let sendstr = `username=${$("#username").value}&userpass=${$("#userpass").value}`;
        xhr.send(sendstr);
    }
    
    function $(str){
        if(str.charAt(0)=="#"){
            return document.getElementById(str.substring(1));
        }else if(str.charAt(0)=="."){
            return document.getElementsByClassName(str.substring(1));
        }else{
            return document.getElementsByTagName(str);
        }
    }	
    
    </script>
